<template>
  <div class="mb-12 overflow-hidden">
    <div
      class="sticky top-0 z-50 w-full px-4 pb-3 text-gray-900 transition-all bg-gray-50 lg:px-0"
    >
      <div
        :class="{ 'h-0.5 mb-2': scrollPosition > 0 }"
        class="hidden w-full h-2 mb-4 transition-all duration-300 bg-gray-900 lg:block"
      />

      <div class="flex items-center justify-between constrained mt-2.5 lg:mt-0">
        <div class="text-2xl font-extrabold text-gray-900">
          <span class="text-blue-600">Naledi</span> Hollbruegge
        </div>
        <nav
          class="hidden space-x-8 text-lg font-semibold text-gray-800 md:flex"
        >
          <a>case studies</a>
          <a>blog</a>
          <a>get in touch</a>
        </nav>
      </div>
    </div>

    <div
      class="flex flex-wrap items-center justify-between px-1 pb-16 mt-8 sm:flex-nowrap constrained lg:px-0"
    >
      <div
        class="z-10 flex-grow-0 flex-shrink-0 px-3 mr-16 opacity-100 lg:px-0"
      >
        <h1
          class="mb-6 mr-8 text-6xl font-black tracking-normal xs:text-7xl"
          style="line-height: 1.15"
        >
          <span class="relative z-20">Turn</span>
          <span class="relative z-10 inline-block ml-1">
            <div
              class="absolute inset-0 scale-[147%] translate-x-[16px] translate-y-[-144px] xs:scale-[152%] xs:translate-x-[18px] xs:translate-y-[-142px] text-gray-800"
            >
              <svg
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 265.6210718824834 133.86069639041602"
                width="531.2421437649668"
                height="267.72139278083205"
                class="w-full"
              >
                <g
                  stroke-linecap="round"
                  transform="translate(9.999999999999943 10) rotate(0 104.83398437500003 56.654296875)"
                >
                  <path
                    d="M190.11 25.51 C199.33 30.85, 204.99 39.14, 207.97 46.43 C210.95 53.72, 211.54 61.47, 207.99 69.24 C204.44 77.02, 195.89 86.81, 186.66 93.09 C177.43 99.36, 165.69 103.26, 152.6 106.91 C139.52 110.56, 122.85 114.77, 108.13 114.99 C93.41 115.2, 77.37 111.19, 64.29 108.22 C51.21 105.26, 39.52 102.76, 29.63 97.18 C19.74 91.6, 9.85 82.19, 4.95 74.74 C0.05 67.28, -1.29 60.46, 0.25 52.46 C1.8 44.45, 6.89 33.67, 14.22 26.71 C21.55 19.75, 32.1 15.07, 44.23 10.71 C56.35 6.36, 72.73 1.77, 86.98 0.57 C101.23 -0.63, 115.59 1.55, 129.73 3.53 C143.87 5.51, 158.25 3.92, 171.81 12.47 C185.38 21.02, 207.64 42.36, 211.13 54.84 C214.63 67.33, 194.7 87.25, 192.77 87.37 M169.79 12.17 C181.17 15.83, 187.91 22.05, 194.63 29.12 C201.34 36.19, 208.34 46.38, 210.09 54.57 C211.83 62.77, 210.74 71.26, 205.1 78.3 C199.45 85.33, 187.47 91.28, 176.22 96.78 C164.98 102.28, 150.75 108.95, 137.63 111.3 C124.51 113.65, 111.28 111.77, 97.53 110.87 C83.77 109.97, 68.31 108.95, 55.11 105.92 C41.92 102.89, 27.41 98.97, 18.36 92.7 C9.31 86.44, 3.26 76.7, 0.83 68.34 C-1.61 59.98, 0.61 50.24, 3.77 42.56 C6.93 34.88, 10.74 28.53, 19.78 22.27 C28.83 16.02, 44.48 8.82, 58.04 5.05 C71.6 1.29, 86.91 0.2, 101.14 -0.31 C115.37 -0.82, 132.5 0.26, 143.43 1.98 C154.35 3.7, 162.92 8.68, 166.69 10.02 C170.46 11.37, 167.21 9.09, 166.03 10.05"
                    stroke="currentColor"
                    stroke-width="2"
                    fill="none"
                  ></path>
                </g>
                <g stroke-linecap="round">
                  <g
                    transform="translate(227.13115382205797 55.765625) rotate(0 13.545754027726048 34.88286065943328)"
                  >
                    <path
                      d="M1.33 2.68 C6.3 5.51, 25.79 8.16, 28.2 19.06 C30.61 29.96, 17.74 60.23, 15.8 68.1 M-1.4 1.67 C3.37 3.58, 23.61 5.08, 26.11 15.41 C28.61 25.74, 15.1 54.73, 13.62 63.66"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="none"
                    ></path>
                  </g>
                  <g
                    transform="translate(227.13115382205797 55.765625) rotate(0 13.545754027726048 34.88286065943328)"
                  >
                    <path
                      d="M16.18 38.67 C16.61 43.41, 16.22 50.65, 13.87 66.59 M12.91 37.95 C11.95 46.1, 12.37 49.69, 15.08 65.54"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="currentColor"
                    ></path>
                  </g>
                  <g
                    transform="translate(227.13115382205797 55.765625) rotate(0 13.545754027726048 34.88286065943328)"
                  >
                    <path
                      d="M32.79 43.79 C29.13 47.45, 24.73 53.45, 13.87 66.59 M29.52 43.07 C24.57 50.16, 20.97 52.52, 15.08 65.54"
                      stroke="currentColor"
                      stroke-width="2"
                      fill="currentColor"
                    ></path>
                  </g>
                </g>
              </svg>
            </div>
            data
          </span>
          <br />
          into
          <span class="relative inline-block">
            <div class="absolute inset-x-0 bottom-0">
              <svg
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 232.26367138005787 25.19046187079016"
                width="464.52734276011574"
                height="50.38092374158032"
                class="w-full text-blue-600 scale-x-[110%] translate-y-8"
              >
                <g stroke-linecap="round">
                  <g
                    transform="translate(11.85069202572106 12.156040592864201) rotate(0 104.28114366430788 0.4391903425308783)"
                  >
                    <path
                      d="M1.03 -2.16 C35.71 -2.19, 176.11 -1.63, 210.41 -1.69 M-1.85 2.85 C32.4 3.44, 173.38 2.49, 209.13 2.05"
                      stroke="currentColor"
                      stroke-width="4"
                      fill="none"
                    ></path>
                  </g>
                </g>
              </svg>
            </div>
            insight
          </span>
        </h1>
        <h3 class="text-xl font-bold text-black xs:text-2xl">
          Data visualisation consulting
        </h3>

        <div class="flex mt-4">
          <button
            class="hidden px-6 py-3 mr-4 text-lg font-light text-white bg-gray-900 rounded-lg sm:block"
          >
            See case studies
          </button>
          <button
            class="px-6 py-3 text-lg font-bold text-white bg-blue-600 rounded-lg"
          >
            Get in touch
          </button>
        </div>
      </div>

      <div
        class="pl-24 w-[762px] h-[290px] sm:h-[400px] sm:translate-y-0 translate-y-[-25px] z-0 relative translate-x-[-140px] xs:translate-x-[-160px] sm:translate-x-[-80px] scale-[80%] sm:scale-100"
      >
        <div
          class="relative border-4 border-gray-900 rounded-2xl w-[762px] h-[500px] translate-y-12"
        >
          <!-- left fadeout -->
          <div
            class="pointer-events-none absolute inset-y-0 z-10 translate-x-[-540px] -left-32 w-[620px] bg-gray-50"
          />
          <div
            class="absolute inset-y-0 left-0 z-10 w-24 translate-x-[-100px] pointer-events-none bg-gradient-to-r from-gray-50 via-gray-50"
          />
          <!-- right fadeout -->
          <div
            class="pointer-events-none absolute inset-y-0 z-10 translate-x-[800px] right-0 w-[540px] bg-gray-50"
          />
          <div
            class="pointer-events-none absolute inset-y-0 right-0 z-10 w-40 translate-x-[300px] bg-gradient-to-l from-gray-50 via-gray-50"
          />

          <!-- browser buttons -->
          <div class="absolute flex space-x-2.5 top-4 left-4">
            <div
              v-for="n in 3"
              :key="n"
              class="w-4 h-4 border-2 border-gray-900 rounded-full"
            ></div>
          </div>

          <!-- some header text -->
          <div class="px-4 pt-16 ml-4">
            <div class="flex space-x-2">
              <div
                v-for="[i, word] in 'Descript of the webpage'
                  .split(' ')
                  .entries()"
                :key="i"
                class="h-3 overflow-hidden text-xl text-transparent transition-all bg-gray-900 rounded-lg"
              >
                {{ word }}
              </div>
            </div>

            <div class="flex mt-3 ml-0.5">
              <div
                v-for="[i, word] in 'Some smaller summary underneath'
                  .split(' ')
                  .entries()"
                :key="i"
                class="h-1 mb-2.5 mr-1 overflow-hidden text-xs text-transparent bg-gray-900 rounded-lg"
              >
                {{ word }}
              </div>
            </div>
          </div>

          <!-- viz screenshots -->
          <transition-group
            class="absolute flex top-32 translate-x-[-537px]"
            name="list-complete"
            tag="div"
          >
            <div
              v-for="[index, project] in heroProjects.entries()"
              :key="project.summary"
              :class="{
                'pointer-events-none': index < 1,
              }"
              class="relative w-64 ml-6 transition-all duration-1000 ease-in-out hover:duration-300 h-44 group"
              @mouseover="heroDisabled = true"
              @mouseout="heroDisabled = false"
            >
              <div
                :class="{
                  '-translate-x-2 translate-y-2 scale-[105%]':
                    project.emphasized && !heroDisabled,
                }"
                class="absolute inset-0 transition-all duration-1000 group-hover:duration-300 bg-gray-900 rounded-lg group-hover:-translate-x-2 group-hover:translate-y-2 group-hover:scale-[105%] ease-in-out hero-dots-2"
              />

              <a
                :href="project.href"
                target="_blank"
                :class="{
                  'pointer-events-none': index < 1,
                  'translate-x-2 -translate-y-2 scale-[105%] opacity-100':
                    project.emphasized && !heroDisabled,
                  'opacity-[0.97]': !project.emphasized || heroDisabled,
                }"
                :style="`background-image: url('${project.image}')`"
                class="absolute inset-0 transition-all duration-1000 group-hover:duration-300 bg-cover border-2 border-gray-900 rounded-lg bg-gray-50 group-hover:translate-x-2 group-hover:-translate-y-2 group-hover:scale-[105%] group-hover:opacity-100 ease-in-out"
              />
            </div>
          </transition-group>

          <!-- some screenshot text -->
          <div class="absolute top-[330px] left-4 px-4">
            <div class="flex space-x-1">
              <div
                v-for="[i, word] in 'Some project title'.split(' ').entries()"
                :key="i"
                class="h-2 overflow-hidden text-lg text-transparent transition-all bg-gray-900 rounded-lg"
              >
                {{ word }}
              </div>
            </div>
            <div class="flex flex-wrap pr-6 mt-3 ml-px">
              <div
                v-for="[i, word] in lorem
                  .concat(lorem)
                  .concat(lorem)
                  .split(' ')
                  .entries()"
                :key="i"
                class="h-1 mb-2.5 mr-1 overflow-hidden text-xs text-transparent bg-gray-900 rounded-lg"
              >
                {{ word }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="relative z-20 pt-20 pb-20 text-lg text-gray-100 bg-gray-900">
      <div class="constrained">
        <div class="flex flex-wrap items-center md:flex-nowrap">
          <img
            src="/naledi-crop.png"
            class="object-contain w-64 mx-auto mb-12 mr-12"
          />
          <div>
            <h1 class="mb-6 text-5xl font-black">What I offer</h1>
            <p class="mb-6 leading-relaxed">{{ lorem }}</p>
            <p class="mb-6 leading-relaxed">{{ lorem }}</p>
            <button
              class="px-6 py-3 text-lg font-bold text-white bg-blue-600 rounded-lg"
            >
              Get in touch
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="mb-6 constrained">
      <h1 class="mt-20 mb-16 text-5xl font-black text-gray-900">
        What I've done
      </h1>
      <div
        v-for="[n, caseStudy] in caseStudies.entries()"
        :key="caseStudy.summary"
        class="flex flex-wrap items-center mb-24 lg:flex-nowrap"
      >
        <div
          :class="{
            'lg:mr-16': n % 2 === 0,
            'lg:mr-6': n % 2 === 1,
          }"
          class="relative order-2 w-full h-48 max-w-lg mb-8 ml-2 mr-4 transition-all duration-1000 ease-in-out lg:ml-6 lg:flex-shrink-0 md:h-64 lg:h-72 group"
        >
          <div
            class="absolute inset-0 transition-all duration-1000 bg-gray-900 rounded-lg ease-in-out hero-dots-2 -translate-x-2 translate-y-2 scale-[105%]"
          />

          <div
            :style="`background-image: url('${caseStudy.image}')`"
            class="absolute inset-0 transition-all duration-1000 bg-cover border-2 border-gray-900 rounded-lg bg-gray-50 ease-in-out translate-x-2 -translate-y-2 scale-[105%] opacity-100"
          />
        </div>
        <div
          :class="{
            'order-3 lg:order-1 lg:mr-16': n % 2 === 1,
            'order-3': n % 2 === 0,
          }"
        >
          <h2 class="text-3xl font-black text-gray-900">
            {{ caseStudy.client }}
          </h2>
          <h3 class="mb-2 text-xl font-semibold text-gray-900">
            {{ caseStudy.summary }}
          </h3>
          <p class="mb-6 leading-relaxed text-gray-800">
            {{ caseStudy.description }}
          </p>
          <button
            class="px-6 py-3 text-lg font-bold text-white bg-blue-600 rounded-lg"
          >
            View case study
          </button>
        </div>
      </div>
    </div>

    <div class="relative z-20 pt-20 pb-20 text-lg text-gray-100 bg-gray-900">
      <div class="mb-6 constrained">
        <h1 class="mt-0 mb-12 text-5xl font-black">More of my work</h1>
        <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
          <div
            v-for="project in projects"
            :key="project.image"
            class="relative w-full h-64 border-4 border-gray-900 rounded-lg duration-[1ms]"
            @click="project.showCaption = true"
            @mouseover="project.showCaption = true"
            @mouseleave="project.showCaption = false"
          >
            <!-- <div
              class="absolute inset-0 transform translate-x-1.5 translate-y-1.5 bg-gray-50 rounded-lg"
            /> -->
            <div
              :style="`background-image: url('${project.image}')`"
              class="absolute inset-0 bg-cover rounded-lg shadow-sm"
            />
            <transition
              enter-class="opacity-0"
              enter-to-class="opacity-100"
              enter-active-class="transition duration-150"
              leave-class="opacity-100"
              leave-to-class="opacity-0"
              leave-active-class="transition duration-300"
            >
              <div v-if="project.showCaption" class="w-full h-full rounded-lg">
                <a
                  :href="project.href"
                  target="_blank"
                  class="absolute w-full h-full"
                >
                  <div
                    class="absolute w-full h-full bg-gray-800 rounded-lg opacity-90"
                  ></div>
                  <div
                    class="absolute z-10 flex flex-col items-center justify-center w-full h-full px-4 text-center sm:px-6"
                  >
                    <h5
                      class="text-lg font-bold leading-6 text-white sm:text-2xl"
                    >
                      {{ project.client }}
                    </h5>

                    <p class="mt-2 text-base leading-6 text-white">
                      {{ project.summary }}
                    </p>
                    <span
                      class="mt-5 text-white text-sm border border-solid px-4 py-1.5 rounded-md"
                    >
                      View
                    </span>
                  </div>
                </a>
              </div>
            </transition>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-0 mb-12 constrained">
      <h1 class="mt-12 mb-10 text-5xl font-black text-gray-900">
        What I write about
      </h1>
      <div>{{ lorem }}</div>
    </div>

    <div class="relative z-20 pt-20 pb-20 text-lg text-gray-100 bg-gray-900">
      <div class="mb-6 constrained">
        <h1 class="mb-10 text-5xl font-black text-gray-100">
          What people have said
        </h1>
        <div>{{ lorem }}</div>
      </div>
    </div>

    <div class="mt-12 mb-6 constrained">Some footer stuff...</div>
  </div>
</template>

<script>
export default {
  layout: 'updated',

  data() {
    return {
      heroDisabled: false,
      heroIndex: 3,
      lorem:
        'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus neque at ipsum condimentum posuere. Fusce dapibus mauris lacinia aliquet hendrerit. Nulla nisl massa, dictum sed leo et, fringilla sollicitudin nisi. Fusce augue tortor, ultrices et purus sed, pulvinar porta lectus. Aenean pretium tempus tellus a gravida. Vivamus ut turpis ante.',
      projects: [
        {
          showCaption: false,
          client: 'Equal Measures 2030',
          summary: 'How well are countries meeting the needs of girls?',
          image: '/1.jpg',
          href: 'https://data.em2030.org/key-groups/girls/',
        },
        {
          showCaption: false,
          client: 'Operation Fistula',
          summary:
            'Visualising estimates of obstetric fistula prevalence based on an academic research paper.',
          image: '/2.jpg',
          href:
            'https://public.tableau.com/profile/operation.fistula6589#!/vizhome/EstimatedPrevalenceofObstetricFistulain19Sub-SaharanAfricanCountries/Estimateprevalence',
        },
        {
          showCaption: false,
          client: 'Personal Project',
          summary:
            'Using Mapbox and Tableau to raise awareness of migrant deaths. Awarded “Viz of the Day”.',
          image: '/3.png',
          href:
            'https://public.tableau.com/profile/naledi.hollbruegge#!/vizhome/MigrantdeathsanddisappearancesintheMediterranean/MigrantsintheMediterranean',
        },
        {
          showCaption: false,
          client: 'Capgemini',
          summary:
            'Provided design and technical guidance to the team visualising the results of the IT-trends survey.',
          image: '/4.jpg',
          href:
            'https://public.tableau.com/profile/capgeminide#!/vizhome/IT-Trends_2018/ITTrendsStory',
        },
        {
          showCaption: false,
          client: 'Operation Fistula',
          summary:
            'Alteryx macro that uses an API to extract data from Airtable.',
          image: '/5.png',
          href:
            'https://nalediholly.wordpress.com/2019/02/07/airtable-and-alteryx/',
        },
        {
          showCaption: false,
          client: 'Direct Relief',
          summary:
            'Interactive tool to explore where clinical data collection about obstetric fistula is most successful. ',
          image: '/6.png',
          href:
            'https://public.tableau.com/profile/operation.fistula6589#!/vizhome/Engagementinthefistulasector/Engagement',
        },
        {
          showCaption: false,
          client: 'Equal Measures 2030 ',
          summary:
            'Interactive visualisation exploring if countries are making progress towards more gender equality. ',
          image: '/7.png',
          href:
            'https://data.em2030.org/2020-index-projections/data-explorer-global/',
        },
        {
          showCaption: false,
          client: 'Personal Project',
          summary:
            'Interactive tool to explore results from a survey looking at attitudes to discrimination.',
          image: '/8.png',
          href:
            'https://public.tableau.com/profile/naledi.hollbruegge#!/vizhome/PerceptionsofdiscriminationintheUSin2014/Perceptionsofdiscriminationsurveyresults',
        },
        {
          showCaption: false,
          client: 'Personal Project',
          summary:
            'Mobile-optimised visualisation exploring malaria trends in Africa. Awarded “Viz of the Day” and has over 67900 views to date.',
          image: '/9.png',
          href:
            'https://public.tableau.com/profile/naledi.hollbruegge#!/vizhome/MakeoverMonday34Malaria/MalariainAfrica',
        },
        {
          showCaption: false,
          client: 'Personal Project',
          summary:
            'Visualisation of complex data around policy makers’ knowledge on gender issues. Featured in the book “Makeover Monday”. ',
          image: '/10.png',
          href:
            'https://public.tableau.com/profile/naledi.hollbruegge#!/vizhome/Whatpolicymakersknowaboutwomensissues-MakeoverMonday102018/Whatdotheyknow',
        },
        {
          showCaption: false,
          client: 'Deloitte',
          summary:
            'An Alteryx macro that parses the XML of another workflow to extract a list of all tools utilised. ',
          image: '/11.png',
          href:
            'https://gallery.alteryx.com/#!app/Extract-Alteryx-Tools-Macro/5aa941398a93373b041ae460',
        },
        {
          showCaption: false,
          client: 'Personal Project',
          summary:
            'Self-quantification project in which I recorded data about the books I read and presented these in an infographic style.',
          image: '/12.png',
          href:
            'https://public.tableau.com/profile/naledi.hollbruegge#!/vizhome/MyYearInBooks/WhatIreadin2019',
        },
      ],
      caseStudies: [
        {
          client: 'Equal Measures 2030',
          summary: 'How well are countries meeting the needs of girls?',
          description:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus neque at ipsum condimentum posuere. Fusce dapibus mauris lacinia aliquet hendrerit. Nulla nisl massa, dictum sed leo et, fringilla sollicitudin nisi. Fusce augue tortor, ultrices et purus sed, pulvinar porta lectus. Aenean pretium tempus tellus a gravida. Vivamus ut turpis ante.',
          image: '/1.jpg',
          href: 'https://data.em2030.org/key-groups/girls/',
        },
        {
          client: 'Operation Fistula',
          summary:
            'Visualising estimates of obstetric fistula prevalence based on an academic research paper.',
          description:
            'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam faucibus neque at ipsum condimentum posuere. Fusce dapibus mauris lacinia aliquet hendrerit. Nulla nisl massa, dictum sed leo et, fringilla sollicitudin nisi. Fusce augue tortor, ultrices et purus sed, pulvinar porta lectus. Aenean pretium tempus tellus a gravida. Vivamus ut turpis ante.',
          image: '/2.jpg',
          href:
            'https://public.tableau.com/profile/operation.fistula6589#!/vizhome/EstimatedPrevalenceofObstetricFistulain19Sub-SaharanAfricanCountries/Estimateprevalence',
        },
      ],
      scrollPosition: null,
    }
  },

  computed: {
    heroProjects() {
      const index = this.heroIndex % 12

      const projects = this.projects
        .concat(this.projects)
        .slice(index, index + 7)
        .map((p, i) => ({
          ...p,
          emphasized: i === 2,
        }))

      return projects
    },
  },

  mounted() {
    setInterval(() => {
      if (this.heroDisabled) return
      this.heroIndex = this.heroIndex + 1
    }, 2000)

    window.addEventListener('scroll', this.updateScroll)
  },

  methods: {
    updateScroll() {
      this.scrollPosition = window.scrollY
    },
  },
}
</script>

<style scoped>
.constrained {
  @apply container mx-auto px-4 sm:px-6 lg:px-8 xl:px-48;
}

.list-complete-enter-active,
.list-complete-leave-active {
  position: absolute;
  opacity: 0;
  transition-duration: 1ms;
}
.list-complete-enter,
.list-complete-leave-to {
  opacity: 0;
  transition-duration: 1ms;
}
</style>
